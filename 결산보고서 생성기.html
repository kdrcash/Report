<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결산 보고서 자동 생성기</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='8' fill='rgb(74,85,104)'/><text x='50%' y='50%' dominant-baseline='central' text-anchor='middle' font-size='18' font-weight='bold' fill='white' font-family='sans-serif'>J</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen py-8">
    <div class="container mx-auto p-4 md:p-8 max-w-2xl w-full">
        <div class="bg-white rounded-2xl shadow-lg p-6 md:p-10">
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold text-gray-800">결산 보고서 자동 생성기</h1>
                <p class="text-gray-500 mt-2">수치를 입력하여 결산 보고 내역을 간편하게 생성하세요.</p>
            </div>

            <div class="space-y-6">
                <!-- 연도 설정 -->
                <div class="p-4 bg-gray-50 rounded-lg border">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">기준 연도 설정</h3>
                    <div class="flex items-center space-x-4">
                        <div class="flex-1">
                            <label for="baseYear" class="block text-sm font-medium text-gray-700 mb-1">기준 연도 (YY)</label>
                            <input type="text" id="baseYear" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="예: 25">
                        </div>
                    </div>
                </div>

                <!-- 성실신고 해당여부 설정 -->
                <div class="p-4 bg-gray-50 rounded-lg border">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">성실신고 해당여부</h3>
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center">
                            <input type="radio" id="sungsilNo" name="sungsilStatus" value="no" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                            <label for="sungsilNo" class="ml-2 block text-sm font-medium text-gray-700">미해당 (5월 31일 신고)</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="sungsilYes" name="sungsilStatus" value="yes" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <label for="sungsilYes" class="ml-2 block text-sm font-medium text-gray-700">해당 (6월 30일 신고)</label>
                        </div>
                    </div>
                </div>

                <div>
                    <label for="sales" class="block text-sm font-medium text-gray-700 mb-2">1. 매출 (단위: 억)</label>
                    <input type="text" id="sales" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150" placeholder="예: 4.6">
                </div>
                <div>
                    <label for="incomeRate" class="block text-sm font-medium text-gray-700 mb-2">2. 소득률 (단위: %)</label>
                    <input type="text" id="incomeRate" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150" placeholder="예: 15.5">
                </div>
                
                <!-- 세금 섹션 -->
                <div class="space-y-4 p-4 bg-gray-50 rounded-lg border">
                     <h3 class="text-lg font-semibold text-gray-800">3. 세금</h3>
                     <div>
                        <label for="taxDate1" class="block text-sm font-medium text-gray-700 mb-1">(1) 중간예납일</label>
                        <input type="text" id="taxDate1" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="예: 25.11.30">
                     </div>
                     <div>
                        <label for="interimTaxAmount" class="block text-sm font-medium text-gray-700 mb-1">(1) 중간예납액</label>
                        <input type="text" id="interimTaxAmount" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="금액 입력 (미입력 시 '없습니다'로 표시)">
                    </div>
                     <div>
                        <label for="taxDate2" class="block text-sm font-medium text-gray-700 mb-1">(2) 종합소득세 신고일</label>
                        <input type="text" id="taxDate2" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="예: 26.05.31">
                     </div>
                     <div>
                        <label for="taxDesc" class="block text-sm font-medium text-gray-700 mb-1">종합소득세 납부 예상액</label>
                        <input type="text" id="taxDesc" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="예: 거의 안나오실겁니다">
                     </div>
                </div>

                <!-- 항목 4 선택 -->
                <div class="p-4 bg-gray-50 rounded-lg border">
                    <h3 class="text-lg font-semibold text-gray-800 mb-3">4. 항목 선택</h3>
                    <div class="flex items-center space-x-6">
                        <div class="flex items-center">
                            <input type="radio" id="typeExpense" name="item4Type" value="필요비용" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500" checked>
                            <label for="typeExpense" class="ml-2 block text-sm font-medium text-gray-700">필요비용</label>
                        </div>
                        <div class="flex items-center">
                            <input type="radio" id="typeSpecial" name="item4Type" value="특이사항" class="h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500">
                            <label for="typeSpecial" class="ml-2 block text-sm font-medium text-gray-700">특이사항</label>
                        </div>
                    </div>
                    <div class="mt-3">
                        <div id="expenseAmountContainer">
                            <label for="expenseAmount" class="block text-sm font-medium text-gray-700 mb-1">필요 비용 금액</label>
                            <input type="text" id="expenseAmount" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="예: 1000만원">
                        </div>
                        <div id="specialNoteContainer" class="hidden">
                            <label for="item4Desc" class="block text-sm font-medium text-gray-700 mb-1">내용 입력</label>
                            <input type="text" id="item4Desc" class="w-full px-4 py-3 border border-gray-300 rounded-lg" placeholder="예: 연중에 특이사항 전달드렸습니다">
                        </div>
                    </div>
                </div>
                
                <button id="generateBtn" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-300 ease-in-out transform hover:scale-105">
                    보고서 생성하기
                </button>
            </div>

            <div id="resultContainer" class="mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200 hidden">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">생성된 보고서</h2>
                <div id="result" class="text-gray-700 whitespace-pre-wrap leading-relaxed"></div>
                <button id="copyBtn" class="mt-6 bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 transition duration-150 text-sm">
                    클립보드에 복사
                </button>
            </div>
             <div id="error" class="mt-6 text-center text-red-500 font-medium hidden"></div>
        </div>
        <footer class="text-center mt-6 text-sm text-gray-500">
            세무법인진솔 박세진세무사님 전용
        </footer>
    </div>

    <script>
        // 입력 필드 요소
        const salesInput = document.getElementById('sales');
        const incomeRateInput = document.getElementById('incomeRate');
        const taxDescInput = document.getElementById('taxDesc');
        const interimTaxAmountInput = document.getElementById('interimTaxAmount');
        const expenseAmountInput = document.getElementById('expenseAmount');
        const item4DescInput = document.getElementById('item4Desc');

        // 컨테이너 요소
        const expenseAmountContainer = document.getElementById('expenseAmountContainer');
        const specialNoteContainer = document.getElementById('specialNoteContainer');

        // 연도 및 날짜 설정 요소
        const baseYearInput = document.getElementById('baseYear');
        const taxDate1Input = document.getElementById('taxDate1');
        const taxDate2Input = document.getElementById('taxDate2');
        const sungsilRadios = document.querySelectorAll('input[name="sungsilStatus"]');
        const item4TypeRadios = document.querySelectorAll('input[name="item4Type"]');

        // 버튼 및 결과 표시 요소
        const generateBtn = document.getElementById('generateBtn');
        const resultContainer = document.getElementById('resultContainer');
        const resultDiv = document.getElementById('result');
        const errorDiv = document.getElementById('error');
        const copyBtn = document.getElementById('copyBtn');

        // --- 이벤트 리스너 ---
        generateBtn.addEventListener('click', generateReport);
        copyBtn.addEventListener('click', copyToClipboard);
        baseYearInput.addEventListener('input', applyDefaultDates);
        sungsilRadios.forEach(radio => radio.addEventListener('change', applyDefaultDates));
        item4TypeRadios.forEach(radio => radio.addEventListener('change', toggleItem4Inputs));

        // 페이지 로드 시 기본값 설정
        document.addEventListener('DOMContentLoaded', () => {
            const currentYear = new Date().getFullYear();
            const year = String(currentYear).slice(-2);
            baseYearInput.value = year;
            applyDefaultDates();
            toggleItem4Inputs(); 
        });

        // --- 함수 ---

        /**
         * '기준 연도'와 '성실신고 여부'를 바탕으로 세금 신고 날짜를 자동으로 채웁니다.
         */
        function applyDefaultDates() {
            const baseYear = baseYearInput.value.trim();
            if (!/^\d{2}$/.test(baseYear)) return; // YY 형식인지 확인

            const nextYear = String(parseInt(baseYear, 10) + 1).padStart(2, '0');
            const isSungsil = document.querySelector('input[name="sungsilStatus"]:checked').value === 'yes';

            taxDate1Input.value = `${baseYear}.11.30`;
            taxDate2Input.value = isSungsil ? `${nextYear}.06.30` : `${nextYear}.05.31`;
        }
        
        /**
         * 항목 4 타입에 따라 입력 필드를 토글합니다.
         */
        function toggleItem4Inputs() {
            const selectedType = document.querySelector('input[name="item4Type"]:checked').value;
            if (selectedType === '필요비용') {
                expenseAmountContainer.classList.remove('hidden');
                specialNoteContainer.classList.add('hidden');
            } else { // '특이사항'
                expenseAmountContainer.classList.add('hidden');
                specialNoteContainer.classList.remove('hidden');
            }
        }

        /**
         * 입력된 정보를 바탕으로 결산 보고서 텍스트를 생성합니다.
         */
        function generateReport() {
            const requiredValues = {
                sales: salesInput.value.trim(),
                incomeRate: incomeRateInput.value.trim(),
                taxDate1: taxDate1Input.value.trim(),
                taxDate2: taxDate2Input.value.trim(),
                taxDesc: taxDescInput.value.trim(),
            };
            
            // 필수 공통 항목이 채워졌는지 확인
            if (Object.values(requiredValues).some(value => !value)) {
                showError("1, 2, 3번 항목을 모두 입력해주세요.");
                return;
            }

            const interimTaxAmount = interimTaxAmountInput.value.trim();
            const item4Type = document.querySelector('input[name="item4Type"]:checked').value;
            let item4Text = '';

            if (item4Type === '필요비용') {
                const expenseAmount = expenseAmountInput.value.trim();
                if (!expenseAmount) {
                    showError("4번 항목의 필요 비용 금액을 입력해주세요.");
                    return;
                }
                item4Text = `4. 필요비용
소득률 도달위해서 필요한 비용은 ${expenseAmount}가량입니다. 12월까지 모든 개인비용까지 반영 후 추가로 필요한 비용이라고 보시면 됩니다.`;
            } else { // '특이사항'
                const specialNote = item4DescInput.value.trim();
                if (!specialNote) {
                    showError("4번 항목의 특이사항 내용을 입력해주세요.");
                    return;
                }
                item4Text = `4. 특이사항
${specialNote}.`;
            }

            errorDiv.classList.add('hidden');

            const interimTaxText = interimTaxAmount ? `중간예납 ${interimTaxAmount}` : '중간예납 없습니다';
            
            // 템플릿에 사용자 입력값 삽입
            const reportText = `세무법인진솔 박세진세무사입니다.
결산보고내역 정리해서 보내드립니다.

1. 매출
연말까지 ${requiredValues.sales}억 전후 예상됩니다.

2. 소득률
${requiredValues.incomeRate}% 목표로 하고 있습니다.

3. 세금
(1) ${requiredValues.taxDate1} ${interimTaxText}.
(2) ${requiredValues.taxDate2} 종합소득세 ${requiredValues.taxDesc}.

${item4Text}

자세한 사항은 유선으로 설명드리겠습니다.

감사합니다.`;

            resultDiv.innerText = reportText;
            resultContainer.classList.remove('hidden');
        }
        
        function showError(message) {
            errorDiv.textContent = message;
            errorDiv.classList.remove('hidden');
            resultContainer.classList.add('hidden');
        }

        function copyToClipboard() {
            const textToCopy = resultDiv.innerText;
            const textArea = document.createElement('textarea');
            textArea.value = textToCopy;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                copyBtn.textContent = '복사 완료!';
                setTimeout(() => { copyBtn.textContent = '클립보드에 복사'; }, 2000);
            } catch (err) {
                console.error('클립보드 복사 실패:', err);
                copyBtn.textContent = '복사 실패';
                setTimeout(() => { copyBtn.textContent = '클립보드에 복사'; }, 2000);
            }
            document.body.removeChild(textArea);
        }
    </script>
</body>
</html>

